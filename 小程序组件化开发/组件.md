# 组件

组件就是以某种方式对业务逻辑和功能的封装。

## 组件的特点

- 高内聚：就是把组件的业务逻辑和功能封装在组件里，使用者可以方便的使用组件，而不用去关心组件内部的实现。
- 可复用：组件的封装类似于面向对象中类的概念，使用者可以方便的复用。不同的是：类是通过类的实例化来实现复用，而组件则是通过声明标签的方式；通过暴露相应的配置项可以供使用者方便的复用组件。

## 如何定义一个组件

定义组件的时候一定要权衡高内聚和可复用这两个方面。

1. 不要盲目的把组件不应该具有的功能封装在组件里，而是应该在组件需要添加额外功能的时候通知外部程序实现相应的功能。

例如：一个图片查看器，原本具有以下功能：

- 点击图片放大
- 查看图标(可能是可有可无)
- 查看图标可能是加号 ‘ + ’，也可能是放大镜
- 在某些情况下允许双指缩放（移动端）

现在需要添加一个功能：在点击查看图片的时候，显示一个功能菜单。这个时候就不应该把显示功能菜单封装在图片查看器组件里，而应该在需要显示功能菜单的时候通知组件外部的其他程序显示功能菜单。

### 通知外部程序的方法：

#### 1. 钩子函数

在组件外部定义钩子函数，使用组件的时候钩子函数通过配置项传递给组件；组件内部在相应的时间调用钩子函数。比如：上述例子中就可以监听图片查看器的点击事件，在点击事件的回调函数里调用钩子函数。

##### 钩子函数的缺点：

- 钩子函数在组件内外是强耦合的关系。
- 一个事件可能对应多个钩子函数。

#### 2.自定义事件

在组件内部相应的时间触发一个自定义事件，在组件外部可以根据需要监听自定义事件添加相应的处理程序。

